import java.util.HashSet;
import java.util.List;

import exceptions.DadoInvalidoException;
import exceptions.EntradaException;
import exceptions.SaldoInsuficienteException;
import exceptions.StringInvalidaException;
import exceptions.TipoJogoException;
import exceptions.TipoUsuarioException;


public class Controller {

	private JogoFactory fabricaJogo;
	private UsuarioFactory fabricaUsuario;
	
	public Controller() {
		fabricaJogo = new JogoFactory();
		fabricaUsuario = new UsuarioFactory();
	}
	
	public void novoUsuario(String nome, String login, List jogosComprados, double dinheiro, String tipo) throws EntradaException, TipoUsuarioException {
		
		try {
			Usuario novoUsuario = fabricaUsuario.criaUsuario(nome, login, jogosComprados, dinheiro, tipo);
		} catch (StringInvalidaException e) {
			System.out.println(e.getMessage());
		} catch (DadoInvalidoException e) {
			System.out.println(e.getMessage());
		} catch (TipoUsuarioException e) {
			System.out.println(e.getMessage());
		}
			
	}
	
	public void criaJogo(Usuario usuario, String nomeJogo, double precoJogo, HashSet<Jogabilidade> jogabilidades, String tipoJogo)
			throws EntradaException, SaldoInsuficienteException, TipoJogoException {
	
		try {
			Jogo novoJogo = fabricaJogo.criaJogo(nomeJogo, precoJogo, jogabilidades, tipoJogo);
			usuario.compraJogo(novoJogo);
		} catch (StringInvalidaException e) {
			System.out.println(e.getMessage());
		} catch (DadoInvalidoException e) {
			System.out.println(e.getMessage());
		} 
		
		double valorVenda = usuario.calculaDesconto(precoJogo);
		calcTotalArrecadado(valorVenda);
	}
	
}
