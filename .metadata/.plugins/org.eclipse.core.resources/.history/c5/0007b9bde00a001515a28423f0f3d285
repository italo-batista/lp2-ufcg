package lab05;

import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;

public class Loja {
	
	private List usuarios = new ArrayList();
	private List catalogoDeJogos = new ArrayList();
	private JogoFactory fabricaJogo = new JogoFactory();
	private UsuarioFactory fabricaUsuario = new UsuarioFactory();
	
	public void novoUsuario(String nome, String login, List jogosComprados, double dinheiro, String tipo){
		Usuario novoUsuario = fabricaUsuario.criaUsuario(nome, login, jogosComprados, dinheiro, tipo);
		usuarios.add(novoUsuario);
	}
	
	public void novoJogo(String nome, double preco, HashSet<Jogabilidade> jogabilidades, String tipo){
		Jogo novoJogo = fabricaJogo.criaJogo(nome, preco, jogabilidades, tipo);
		catalogoDeJogos.add(novoJogo);
	}
	
	public void vendeJogo(Usuario usuario, Jogo jogo) throws Exception {
	
		double jogoPreco = jogo.getPreco();
		
		if (jogoPreco > usuario.getDinheiro()) {
			throw new Exception("Voce nao tem saldo suficiente");
		} else {
			Jogo copiaDoUsuario = copiaJogo(jogo);
			usuario.compraJogo(copiaDoUsuario);
		}
	}
		
	public Jogo copiaJogo(Jogo jogo) throws Exception{
		
		Jogo copiaDeJogo;
		
		String copiaNome = jogo.getNome();
		double copiaPreco = jogo.getPreco();
		HashSet copiaJogabilidades = jogo.getJogabilidades();
		
		copiaDeJogo = new Jogo(copiaNome, copiaPreco, copiaJogabilidades);
		return copiaDeJogo;
	}
	
}
